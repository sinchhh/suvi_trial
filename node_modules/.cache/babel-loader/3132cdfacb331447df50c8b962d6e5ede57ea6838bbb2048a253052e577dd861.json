{"ast":null,"code":"import { __values } from \"tslib\";\nimport { browserOrNode, isWebWorker } from '@aws-amplify/core';\nimport Observable from 'zen-observable-ts';\nvar ReachabilityNavigator = /** @class */function () {\n  function ReachabilityNavigator() {}\n  ReachabilityNavigator.prototype.networkMonitor = function (netInfo) {\n    if (browserOrNode().isNode) {\n      return Observable.from([{\n        online: true\n      }]);\n    }\n    var globalObj = isWebWorker() ? self : window;\n    return new Observable(function (observer) {\n      observer.next({\n        online: globalObj.navigator.onLine\n      });\n      var notifyOnline = function () {\n        return observer.next({\n          online: true\n        });\n      };\n      var notifyOffline = function () {\n        return observer.next({\n          online: false\n        });\n      };\n      globalObj.addEventListener('online', notifyOnline);\n      globalObj.addEventListener('offline', notifyOffline);\n      ReachabilityNavigator._observers.push(observer);\n      return function () {\n        globalObj.removeEventListener('online', notifyOnline);\n        globalObj.removeEventListener('offline', notifyOffline);\n        ReachabilityNavigator._observers = ReachabilityNavigator._observers.filter(function (_observer) {\n          return _observer !== observer;\n        });\n      };\n    });\n  };\n  // expose observers to simulate offline mode for integration testing\n  ReachabilityNavigator._observerOverride = function (status) {\n    var e_1, _a;\n    var _loop_1 = function (observer) {\n      if (observer.closed) {\n        ReachabilityNavigator._observers = ReachabilityNavigator._observers.filter(function (_observer) {\n          return _observer !== observer;\n        });\n        return \"continue\";\n      }\n      observer.next(status);\n    };\n    try {\n      for (var _b = __values(ReachabilityNavigator._observers), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var observer = _c.value;\n        _loop_1(observer);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n  ReachabilityNavigator._observers = [];\n  return ReachabilityNavigator;\n}();\nexport default ReachabilityNavigator;","map":{"version":3,"names":["browserOrNode","isWebWorker","Observable","ReachabilityNavigator","prototype","networkMonitor","netInfo","isNode","from","online","globalObj","self","window","observer","next","navigator","onLine","notifyOnline","notifyOffline","addEventListener","_observers","push","removeEventListener","filter","_observer","_observerOverride","status","closed","_b","__values","_c","done","value"],"sources":["C:\\Users\\sinch\\node_modules\\@aws-amplify\\core\\src\\Util\\Reachability.ts"],"sourcesContent":["import { browserOrNode, isWebWorker } from '@aws-amplify/core';\nimport Observable, { ZenObservable } from 'zen-observable-ts';\n\ntype NetworkStatus = {\n\tonline: boolean;\n};\n\nexport default class ReachabilityNavigator implements Reachability {\n\tprivate static _observers: Array<\n\t\tZenObservable.SubscriptionObserver<NetworkStatus>\n\t> = [];\n\n\tnetworkMonitor(netInfo?: any): Observable<NetworkStatus> {\n\t\tif (browserOrNode().isNode) {\n\t\t\treturn Observable.from([{ online: true }]);\n\t\t}\n\n\t\tconst globalObj = isWebWorker() ? self : window;\n\n\t\treturn new Observable(observer => {\n\t\t\tobserver.next({ online: globalObj.navigator.onLine });\n\n\t\t\tconst notifyOnline = () => observer.next({ online: true });\n\t\t\tconst notifyOffline = () => observer.next({ online: false });\n\n\t\t\tglobalObj.addEventListener('online', notifyOnline);\n\t\t\tglobalObj.addEventListener('offline', notifyOffline);\n\n\t\t\tReachabilityNavigator._observers.push(observer);\n\n\t\t\treturn () => {\n\t\t\t\tglobalObj.removeEventListener('online', notifyOnline);\n\t\t\t\tglobalObj.removeEventListener('offline', notifyOffline);\n\n\t\t\t\tReachabilityNavigator._observers = ReachabilityNavigator._observers.filter(\n\t\t\t\t\t_observer => _observer !== observer\n\t\t\t\t);\n\t\t\t};\n\t\t});\n\t}\n\n\t// expose observers to simulate offline mode for integration testing\n\tprivate static _observerOverride(status: NetworkStatus): void {\n\t\tfor (const observer of ReachabilityNavigator._observers) {\n\t\t\tif (observer.closed) {\n\t\t\t\tReachabilityNavigator._observers = ReachabilityNavigator._observers.filter(\n\t\t\t\t\t_observer => _observer !== observer\n\t\t\t\t);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tobserver.next(status);\n\t\t}\n\t}\n}\n\ninterface Reachability {\n\tnetworkMonitor(netInfo?: any): Observable<NetworkStatus>;\n}\n"],"mappings":";AAAA,SAASA,aAAa,EAAEC,WAAW,QAAQ,mBAAmB;AAC9D,OAAOC,UAA6B,MAAM,mBAAmB;AAM7D,IAAAC,qBAAA;EAAA,SAAAA,sBAAA,GA8CA;EAzCCA,qBAAA,CAAAC,SAAA,CAAAC,cAAc,GAAd,UAAeC,OAAa;IAC3B,IAAIN,aAAa,EAAE,CAACO,MAAM,EAAE;MAC3B,OAAOL,UAAU,CAACM,IAAI,CAAC,CAAC;QAAEC,MAAM,EAAE;MAAI,CAAE,CAAC,CAAC;;IAG3C,IAAMC,SAAS,GAAGT,WAAW,EAAE,GAAGU,IAAI,GAAGC,MAAM;IAE/C,OAAO,IAAIV,UAAU,CAAC,UAAAW,QAAQ;MAC7BA,QAAQ,CAACC,IAAI,CAAC;QAAEL,MAAM,EAAEC,SAAS,CAACK,SAAS,CAACC;MAAM,CAAE,CAAC;MAErD,IAAMC,YAAY,GAAG,SAAAA,CAAA;QAAM,OAAAJ,QAAQ,CAACC,IAAI,CAAC;UAAEL,MAAM,EAAE;QAAI,CAAE,CAAC;MAA/B,CAA+B;MAC1D,IAAMS,aAAa,GAAG,SAAAA,CAAA;QAAM,OAAAL,QAAQ,CAACC,IAAI,CAAC;UAAEL,MAAM,EAAE;QAAK,CAAE,CAAC;MAAhC,CAAgC;MAE5DC,SAAS,CAACS,gBAAgB,CAAC,QAAQ,EAAEF,YAAY,CAAC;MAClDP,SAAS,CAACS,gBAAgB,CAAC,SAAS,EAAED,aAAa,CAAC;MAEpDf,qBAAqB,CAACiB,UAAU,CAACC,IAAI,CAACR,QAAQ,CAAC;MAE/C,OAAO;QACNH,SAAS,CAACY,mBAAmB,CAAC,QAAQ,EAAEL,YAAY,CAAC;QACrDP,SAAS,CAACY,mBAAmB,CAAC,SAAS,EAAEJ,aAAa,CAAC;QAEvDf,qBAAqB,CAACiB,UAAU,GAAGjB,qBAAqB,CAACiB,UAAU,CAACG,MAAM,CACzE,UAAAC,SAAS;UAAI,OAAAA,SAAS,KAAKX,QAAQ;QAAtB,CAAsB,CACnC;MACF,CAAC;IACF,CAAC,CAAC;EACH,CAAC;EAED;EACeV,qBAAA,CAAAsB,iBAAiB,GAAhC,UAAiCC,MAAqB;;4BAC1Cb,QAAQ;MAClB,IAAIA,QAAQ,CAACc,MAAM,EAAE;QACpBxB,qBAAqB,CAACiB,UAAU,GAAGjB,qBAAqB,CAACiB,UAAU,CAACG,MAAM,CACzE,UAAAC,SAAS;UAAI,OAAAA,SAAS,KAAKX,QAAQ;QAAtB,CAAsB,CACnC;;;MAGFA,QAAQ,CAACC,IAAI,CAACY,MAAM,CAAC;;;MAPtB,KAAuB,IAAAE,EAAA,GAAAC,QAAA,CAAA1B,qBAAqB,CAACiB,UAAU,GAAAU,EAAA,GAAAF,EAAA,CAAAd,IAAA,KAAAgB,EAAA,CAAAC,IAAA,EAAAD,EAAA,GAAAF,EAAA,CAAAd,IAAA;QAAlD,IAAMD,QAAQ,GAAAiB,EAAA,CAAAE,KAAA;gBAARnB,QAAQ;;;;;;;;;;;;;EASpB,CAAC;EA5CcV,qBAAA,CAAAiB,UAAU,GAErB,EAAE;EA2CP,OAAAjB,qBAAC;CAAA,CA9CD;eAAqBA,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}
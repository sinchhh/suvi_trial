{"ast":null,"code":"'use strict';\n\n//parse Empty Node as self closing node\nconst buildFromOrderedJs = require('./orderedJs2Xml');\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attributesGroupName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  cdataPropName: false,\n  format: false,\n  indentBy: '  ',\n  suppressEmptyNode: false,\n  suppressUnpairedNode: true,\n  suppressBooleanAttributes: true,\n  tagValueProcessor: function (key, a) {\n    return a;\n  },\n  attributeValueProcessor: function (attrName, a) {\n    return a;\n  },\n  preserveOrder: false,\n  commentPropName: false,\n  unpairedTags: [],\n  entities: [{\n    regex: new RegExp(\"&\", \"g\"),\n    val: \"&amp;\"\n  },\n  //it must be on top\n  {\n    regex: new RegExp(\">\", \"g\"),\n    val: \"&gt;\"\n  }, {\n    regex: new RegExp(\"<\", \"g\"),\n    val: \"&lt;\"\n  }, {\n    regex: new RegExp(\"\\'\", \"g\"),\n    val: \"&apos;\"\n  }, {\n    regex: new RegExp(\"\\\"\", \"g\"),\n    val: \"&quot;\"\n  }],\n  processEntities: true,\n  stopNodes: []\n  // transformTagName: false,\n  // transformAttributeName: false,\n};\n\nfunction Builder(options) {\n  this.options = Object.assign({}, defaultOptions, options);\n  if (this.options.ignoreAttributes || this.options.attributesGroupName) {\n    this.isAttribute = function /*a*/\n    () {\n      return false;\n    };\n  } else {\n    this.attrPrefixLen = this.options.attributeNamePrefix.length;\n    this.isAttribute = isAttribute;\n  }\n  this.processTextOrObjNode = processTextOrObjNode;\n  if (this.options.format) {\n    this.indentate = indentate;\n    this.tagEndChar = '>\\n';\n    this.newLine = '\\n';\n  } else {\n    this.indentate = function () {\n      return '';\n    };\n    this.tagEndChar = '>';\n    this.newLine = '';\n  }\n}\nBuilder.prototype.build = function (jObj) {\n  if (this.options.preserveOrder) {\n    return buildFromOrderedJs(jObj, this.options);\n  } else {\n    if (Array.isArray(jObj) && this.options.arrayNodeName && this.options.arrayNodeName.length > 1) {\n      jObj = {\n        [this.options.arrayNodeName]: jObj\n      };\n    }\n    return this.j2x(jObj, 0).val;\n  }\n};\nBuilder.prototype.j2x = function (jObj, level) {\n  let attrStr = '';\n  let val = '';\n  for (let key in jObj) {\n    if (typeof jObj[key] === 'undefined') {\n      // supress undefined node\n    } else if (jObj[key] === null) {\n      if (key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n      // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n    } else if (jObj[key] instanceof Date) {\n      val += this.buildTextValNode(jObj[key], key, '', level);\n    } else if (typeof jObj[key] !== 'object') {\n      //premitive type\n      const attr = this.isAttribute(key);\n      if (attr) {\n        attrStr += this.buildAttrPairStr(attr, '' + jObj[key]);\n      } else {\n        //tag value\n        if (key === this.options.textNodeName) {\n          let newval = this.options.tagValueProcessor(key, '' + jObj[key]);\n          val += this.replaceEntitiesValue(newval);\n        } else {\n          val += this.buildTextValNode(jObj[key], key, '', level);\n        }\n      }\n    } else if (Array.isArray(jObj[key])) {\n      //repeated nodes\n      const arrLen = jObj[key].length;\n      for (let j = 0; j < arrLen; j++) {\n        const item = jObj[key][j];\n        if (typeof item === 'undefined') {\n          // supress undefined node\n        } else if (item === null) {\n          if (key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n          // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n        } else if (typeof item === 'object') {\n          val += this.processTextOrObjNode(item, key, level);\n        } else {\n          val += this.buildTextValNode(item, key, '', level);\n        }\n      }\n    } else {\n      //nested node\n      if (this.options.attributesGroupName && key === this.options.attributesGroupName) {\n        const Ks = Object.keys(jObj[key]);\n        const L = Ks.length;\n        for (let j = 0; j < L; j++) {\n          attrStr += this.buildAttrPairStr(Ks[j], '' + jObj[key][Ks[j]]);\n        }\n      } else {\n        val += this.processTextOrObjNode(jObj[key], key, level);\n      }\n    }\n  }\n  return {\n    attrStr: attrStr,\n    val: val\n  };\n};\nBuilder.prototype.buildAttrPairStr = function (attrName, val) {\n  val = this.options.attributeValueProcessor(attrName, '' + val);\n  val = this.replaceEntitiesValue(val);\n  if (this.options.suppressBooleanAttributes && val === \"true\") {\n    return ' ' + attrName;\n  } else return ' ' + attrName + '=\"' + val + '\"';\n};\nfunction processTextOrObjNode(object, key, level) {\n  const result = this.j2x(object, level + 1);\n  if (object[this.options.textNodeName] !== undefined && Object.keys(object).length === 1) {\n    return this.buildTextValNode(object[this.options.textNodeName], key, result.attrStr, level);\n  } else {\n    return this.buildObjectNode(result.val, key, result.attrStr, level);\n  }\n}\nBuilder.prototype.buildObjectNode = function (val, key, attrStr, level) {\n  if (val === \"\") {\n    if (key[0] === \"?\") return this.indentate(level) + '<' + key + attrStr + '?' + this.tagEndChar;else {\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }\n  } else {\n    let tagEndExp = '</' + key + this.tagEndChar;\n    let piClosingChar = \"\";\n    if (key[0] === \"?\") {\n      piClosingChar = \"?\";\n      tagEndExp = \"\";\n    }\n    if (attrStr && val.indexOf('<') === -1) {\n      return this.indentate(level) + '<' + key + attrStr + piClosingChar + '>' + val + tagEndExp;\n    } else if (this.options.commentPropName !== false && key === this.options.commentPropName && piClosingChar.length === 0) {\n      return this.indentate(level) + `<!--${val}-->` + this.newLine;\n    } else {\n      return this.indentate(level) + '<' + key + attrStr + piClosingChar + this.tagEndChar + val + this.indentate(level) + tagEndExp;\n    }\n  }\n};\nBuilder.prototype.closeTag = function (key) {\n  let closeTag = \"\";\n  if (this.options.unpairedTags.indexOf(key) !== -1) {\n    //unpaired\n    if (!this.options.suppressUnpairedNode) closeTag = \"/\";\n  } else if (this.options.suppressEmptyNode) {\n    //empty\n    closeTag = \"/\";\n  } else {\n    closeTag = `></${key}`;\n  }\n  return closeTag;\n};\nfunction buildEmptyObjNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildObjectNode(val, key, attrStr, level);\n  } else {\n    if (key[0] === \"?\") return this.indentate(level) + '<' + key + attrStr + '?' + this.tagEndChar;else {\n      return this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n      // return this.buildTagStr(level,key, attrStr);\n    }\n  }\n}\n\nBuilder.prototype.buildTextValNode = function (val, key, attrStr, level) {\n  if (this.options.cdataPropName !== false && key === this.options.cdataPropName) {\n    return this.indentate(level) + `<![CDATA[${val}]]>` + this.newLine;\n  } else if (this.options.commentPropName !== false && key === this.options.commentPropName) {\n    return this.indentate(level) + `<!--${val}-->` + this.newLine;\n  } else if (key[0] === \"?\") {\n    //PI tag\n    return this.indentate(level) + '<' + key + attrStr + '?' + this.tagEndChar;\n  } else {\n    let textValue = this.options.tagValueProcessor(key, val);\n    textValue = this.replaceEntitiesValue(textValue);\n    if (textValue === '') {\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    } else {\n      return this.indentate(level) + '<' + key + attrStr + '>' + textValue + '</' + key + this.tagEndChar;\n    }\n  }\n};\nBuilder.prototype.replaceEntitiesValue = function (textValue) {\n  if (textValue && textValue.length > 0 && this.options.processEntities) {\n    for (let i = 0; i < this.options.entities.length; i++) {\n      const entity = this.options.entities[i];\n      textValue = textValue.replace(entity.regex, entity.val);\n    }\n  }\n  return textValue;\n};\nfunction indentate(level) {\n  return this.options.indentBy.repeat(level);\n}\nfunction isAttribute(name /*, options*/) {\n  if (name.startsWith(this.options.attributeNamePrefix)) {\n    return name.substr(this.attrPrefixLen);\n  } else {\n    return false;\n  }\n}\nmodule.exports = Builder;","map":{"version":3,"names":["buildFromOrderedJs","require","defaultOptions","attributeNamePrefix","attributesGroupName","textNodeName","ignoreAttributes","cdataPropName","format","indentBy","suppressEmptyNode","suppressUnpairedNode","suppressBooleanAttributes","tagValueProcessor","key","a","attributeValueProcessor","attrName","preserveOrder","commentPropName","unpairedTags","entities","regex","RegExp","val","processEntities","stopNodes","Builder","options","Object","assign","isAttribute","attrPrefixLen","length","processTextOrObjNode","indentate","tagEndChar","newLine","prototype","build","jObj","Array","isArray","arrayNodeName","j2x","level","attrStr","Date","buildTextValNode","attr","buildAttrPairStr","newval","replaceEntitiesValue","arrLen","j","item","Ks","keys","L","object","result","undefined","buildObjectNode","closeTag","tagEndExp","piClosingChar","indexOf","buildEmptyObjNode","textValue","i","entity","replace","repeat","name","startsWith","substr","module","exports"],"sources":["C:/Users/sinch/node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js"],"sourcesContent":["'use strict';\n//parse Empty Node as self closing node\nconst buildFromOrderedJs = require('./orderedJs2Xml');\n\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attributesGroupName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  cdataPropName: false,\n  format: false,\n  indentBy: '  ',\n  suppressEmptyNode: false,\n  suppressUnpairedNode: true,\n  suppressBooleanAttributes: true,\n  tagValueProcessor: function(key, a) {\n    return a;\n  },\n  attributeValueProcessor: function(attrName, a) {\n    return a;\n  },\n  preserveOrder: false,\n  commentPropName: false,\n  unpairedTags: [],\n  entities: [\n    { regex: new RegExp(\"&\", \"g\"), val: \"&amp;\" },//it must be on top\n    { regex: new RegExp(\">\", \"g\"), val: \"&gt;\" },\n    { regex: new RegExp(\"<\", \"g\"), val: \"&lt;\" },\n    { regex: new RegExp(\"\\'\", \"g\"), val: \"&apos;\" },\n    { regex: new RegExp(\"\\\"\", \"g\"), val: \"&quot;\" }\n  ],\n  processEntities: true,\n  stopNodes: [],\n  // transformTagName: false,\n  // transformAttributeName: false,\n};\n\nfunction Builder(options) {\n  this.options = Object.assign({}, defaultOptions, options);\n  if (this.options.ignoreAttributes || this.options.attributesGroupName) {\n    this.isAttribute = function(/*a*/) {\n      return false;\n    };\n  } else {\n    this.attrPrefixLen = this.options.attributeNamePrefix.length;\n    this.isAttribute = isAttribute;\n  }\n\n  this.processTextOrObjNode = processTextOrObjNode\n\n  if (this.options.format) {\n    this.indentate = indentate;\n    this.tagEndChar = '>\\n';\n    this.newLine = '\\n';\n  } else {\n    this.indentate = function() {\n      return '';\n    };\n    this.tagEndChar = '>';\n    this.newLine = '';\n  }\n}\n\nBuilder.prototype.build = function(jObj) {\n  if(this.options.preserveOrder){\n    return buildFromOrderedJs(jObj, this.options);\n  }else {\n    if(Array.isArray(jObj) && this.options.arrayNodeName && this.options.arrayNodeName.length > 1){\n      jObj = {\n        [this.options.arrayNodeName] : jObj\n      }\n    }\n    return this.j2x(jObj, 0).val;\n  }\n};\n\nBuilder.prototype.j2x = function(jObj, level) {\n  let attrStr = '';\n  let val = '';\n  for (let key in jObj) {\n    if (typeof jObj[key] === 'undefined') {\n      // supress undefined node\n    } else if (jObj[key] === null) {\n      if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n      else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n      // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n    } else if (jObj[key] instanceof Date) {\n      val += this.buildTextValNode(jObj[key], key, '', level);\n    } else if (typeof jObj[key] !== 'object') {\n      //premitive type\n      const attr = this.isAttribute(key);\n      if (attr) {\n        attrStr += this.buildAttrPairStr(attr, '' + jObj[key]);\n      }else {\n        //tag value\n        if (key === this.options.textNodeName) {\n          let newval = this.options.tagValueProcessor(key, '' + jObj[key]);\n          val += this.replaceEntitiesValue(newval);\n        } else {\n          val += this.buildTextValNode(jObj[key], key, '', level);\n        }\n      }\n    } else if (Array.isArray(jObj[key])) {\n      //repeated nodes\n      const arrLen = jObj[key].length;\n      for (let j = 0; j < arrLen; j++) {\n        const item = jObj[key][j];\n        if (typeof item === 'undefined') {\n          // supress undefined node\n        } else if (item === null) {\n          if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n          else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n          // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n        } else if (typeof item === 'object') {\n          val += this.processTextOrObjNode(item, key, level)\n        } else {\n          val += this.buildTextValNode(item, key, '', level);\n        }\n      }\n    } else {\n      //nested node\n      if (this.options.attributesGroupName && key === this.options.attributesGroupName) {\n        const Ks = Object.keys(jObj[key]);\n        const L = Ks.length;\n        for (let j = 0; j < L; j++) {\n          attrStr += this.buildAttrPairStr(Ks[j], '' + jObj[key][Ks[j]]);\n        }\n      } else {\n        val += this.processTextOrObjNode(jObj[key], key, level)\n      }\n    }\n  }\n  return {attrStr: attrStr, val: val};\n};\n\nBuilder.prototype.buildAttrPairStr = function(attrName, val){\n  val = this.options.attributeValueProcessor(attrName, '' + val);\n  val = this.replaceEntitiesValue(val);\n  if (this.options.suppressBooleanAttributes && val === \"true\") {\n    return ' ' + attrName;\n  } else return ' ' + attrName + '=\"' + val + '\"';\n}\n\nfunction processTextOrObjNode (object, key, level) {\n  const result = this.j2x(object, level + 1);\n  if (object[this.options.textNodeName] !== undefined && Object.keys(object).length === 1) {\n    return this.buildTextValNode(object[this.options.textNodeName], key, result.attrStr, level);\n  } else {\n    return this.buildObjectNode(result.val, key, result.attrStr, level);\n  }\n}\n\nBuilder.prototype.buildObjectNode = function(val, key, attrStr, level) {\n  if(val === \"\"){\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }\n  }else{\n\n    let tagEndExp = '</' + key + this.tagEndChar;\n    let piClosingChar = \"\";\n    \n    if(key[0] === \"?\") {\n      piClosingChar = \"?\";\n      tagEndExp = \"\";\n    }\n  \n    if (attrStr && val.indexOf('<') === -1) {\n      return ( this.indentate(level) + '<' +  key + attrStr + piClosingChar + '>' + val + tagEndExp );\n    } else if (this.options.commentPropName !== false && key === this.options.commentPropName && piClosingChar.length === 0) {\n      return this.indentate(level) + `<!--${val}-->` + this.newLine;\n    }else {\n      return (\n        this.indentate(level) + '<' + key + attrStr + piClosingChar + this.tagEndChar +\n        val +\n        this.indentate(level) + tagEndExp    );\n    }\n  }\n}\n\nBuilder.prototype.closeTag = function(key){\n  let closeTag = \"\";\n  if(this.options.unpairedTags.indexOf(key) !== -1){ //unpaired\n    if(!this.options.suppressUnpairedNode) closeTag = \"/\"\n  }else if(this.options.suppressEmptyNode){ //empty\n    closeTag = \"/\";\n  }else{\n    closeTag = `></${key}`\n  }\n  return closeTag;\n}\n\nfunction buildEmptyObjNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildObjectNode(val, key, attrStr, level);\n  } else {\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return  this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n      // return this.buildTagStr(level,key, attrStr);\n    }\n  }\n}\n\nBuilder.prototype.buildTextValNode = function(val, key, attrStr, level) {\n  if (this.options.cdataPropName !== false && key === this.options.cdataPropName) {\n    return this.indentate(level) + `<![CDATA[${val}]]>` +  this.newLine;\n  }else if (this.options.commentPropName !== false && key === this.options.commentPropName) {\n    return this.indentate(level) + `<!--${val}-->` +  this.newLine;\n  }else if(key[0] === \"?\") {//PI tag\n    return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar; \n  }else{\n    let textValue = this.options.tagValueProcessor(key, val);\n    textValue = this.replaceEntitiesValue(textValue);\n  \n    if( textValue === ''){\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }else{\n      return this.indentate(level) + '<' + key + attrStr + '>' +\n         textValue +\n        '</' + key + this.tagEndChar;\n    }\n  }\n}\n\nBuilder.prototype.replaceEntitiesValue = function(textValue){\n  if(textValue && textValue.length > 0 && this.options.processEntities){\n    for (let i=0; i<this.options.entities.length; i++) {\n      const entity = this.options.entities[i];\n      textValue = textValue.replace(entity.regex, entity.val);\n    }\n  }\n  return textValue;\n}\n\nfunction indentate(level) {\n  return this.options.indentBy.repeat(level);\n}\n\nfunction isAttribute(name /*, options*/) {\n  if (name.startsWith(this.options.attributeNamePrefix)) {\n    return name.substr(this.attrPrefixLen);\n  } else {\n    return false;\n  }\n}\n\nmodule.exports = Builder;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}